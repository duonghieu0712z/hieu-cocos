window.__require=function i(t,n,e){function s(c,r){if(!n[c]){if(!t[c]){var o=c.split("/");if(o=o[o.length-1],!t[o]){var a="function"==typeof __require&&__require;if(!r&&a)return a(o,!0);if(h)return h(o,!0);throw new Error("Cannot find module '"+c+"'")}}var u=n[c]={exports:{}};t[c][0].call(u.exports,function(i){return s(t[c][1][i]||i)},u,u.exports,i,t,n,e)}return n[c].exports}for(var h="function"==typeof __require&&__require,c=0;c<e.length;c++)s(e[c]);return s}({Car:[function(i,t,n){"use strict";cc._RF.push(t,"3ff2cdeHhNIJZlSqIBWVN/L","Car"),cc.Class({extends:cc.Component,properties:{speed:20,isMoving:{default:!1,visible:!1}},update:function(i){this.isMoving&&(this.node.x+=this.speed*i)}}),cc._RF.pop()},{}],Chicken:[function(i,t,n){"use strict";cc._RF.push(t,"d6491M3R7tDcqSRoVpp40+r","Chicken"),cc.Class({extends:cc.Component,properties:{direction:cc.Vec2,speed:20,anim:cc.Animation,car:cc.Node,isMoving:{default:!1,visible:!1}},update:function(i){if(this.isMoving){var t=this.direction.normalize();this.node.position=this.node.position.add(t.mul(this.speed*i)),this.onCarAccident()}},playRun:function(){this.anim.play("chicken-run"),this.isMoving=!0},stopRun:function(){this.anim.stop("chicken-run"),this.isMoving=!1},onCarAccident:function(){console.log(this.isAccident()),this.isAccident()&&(this.stopRun(),this.car.isMoving=!1,this.node.color=cc.Color.BLACK)},isAccident:function(){var i=this.node.x-this.node.width*this.node.scaleX/2,t=this.node.y+this.node.height*this.node.scaleY/2,n=this.node.x+this.node.width*this.node.scaleX/2,e=this.node.y-this.node.height*this.node.scaleY/2,s=this.car.x-this.car.width*this.car.scaleX/2,h=this.car.y+this.car.height*this.car.scaleY/2,c=this.car.x+this.car.width*this.car.scaleX/2,r=this.car.y-this.car.height*this.car.scaleY/2;return!(i>c||s>n||e>h||r>t)}}),cc._RF.pop()},{}],GameManager:[function(i,t,n){"use strict";cc._RF.push(t,"fc507pjRWxEeJBPWnupkyi+","GameManager");var e=i("Car"),s=i("Chicken"),h=i("Light");cc.Class({extends:cc.Component,properties:{greenLight:h,car:e,chicken:s},update:function(i){this.greenLight.isLight&&(this.playChickenRun(),this.playCarRun())},playChickenRun:function(){this.chicken.isMoving||this.chicken.playRun()},playCarRun:function(){this.car.isMoving=!0}}),cc._RF.pop()},{Car:"Car",Chicken:"Chicken",Light:"Light"}],Light:[function(i,t,n){"use strict";cc._RF.push(t,"5668eTzY8RDGKpZu8YOJ7nP","Light"),cc.Class({extends:cc.Component,properties:{color:cc.Color.WHITE,lightDuration:1,flashDuration:.2,flashRepeat:6,isCompleted:{default:!1,visible:!1},isLight:{default:!1,visible:!1},_isFlash:!1,_timer:0,_repeatCounter:0},onLoad:function(){this.node.color=this.color,this.turnOff()},turnOn:function(){this.node.opacity=255,this.isLight=!0},turnOff:function(){this.node.opacity=63,this.isLight=!1},switchLight:function(){this.isLight?this.turnOff():this.turnOn()},flash:function(i){this._isFlash&&this._repeatCounter<=this.flashRepeat&&(this._timer+=i,this._timer>=this.flashDuration&&(this.switchLight(),this._repeatCounter++,this._repeatCounter>this.flashRepeat&&(this.isCompleted=!0),this._timer=0))},light:function(i){this._timer+=i,this._timer>=this.lightDuration&&(this._isFlash=!0,this._timer=0)}}),cc._RF.pop()},{}],TrafficLight:[function(i,t,n){"use strict";cc._RF.push(t,"15ee0dpHHtHu7SMvYiHigTQ","TrafficLight");var e=i("Light");cc.Class({extends:cc.Component,properties:{lights:[e],_currentLight:e,_index:0},start:function(){this.turnOnCurrentLight()},update:function(i){this._currentLight&&(this._currentLight.light(i),this._currentLight.flash(i),this.nextLight())},nextLight:function(){if(this._currentLight.isCompleted){if(this._index++,this._index===this.lights.length)return void(this._currentLight=null);this.turnOnCurrentLight()}},turnOnCurrentLight:function(){this._currentLight=this.lights[this._index],this._currentLight.turnOn()}}),cc._RF.pop()},{Light:"Light"}]},{},["Car","Chicken","GameManager","Light","TrafficLight"]);